<template>
  <Nav />
  <main style="background-color: #EAE6D7;">
    <div class="container col-xxl-8 px-4">
      <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
        <div class="col-10 col-sm-8 col-lg-6">
          <img src="/books.jpg" class="d-block mx-lg-auto img-fluid" alt="Bootstrap Themes" width="300" height="200"
            loading="lazy">
        </div>
        <div class="col-lg-6">
          <h1 class="display-5 fw-bold lh-1 mb-3">Get Your Favourite <br> books All in One Place</h1>
          <div class="d-grid gap-2 mt-4 d-md-flex justify-content-md-start">
            <button type="button" class="btn btn-secondary round-6 btn-lg px-4 me-md-2">View Categories</button>
            <!-- <button type="button" class="btn btn-outline-secondary btn-lg px-4">Default</button> -->
          </div>
        </div>
      </div>
      <h3 class="mt-4 fw-bold lh-1 mb-3">
        <vue-feather type="gift"></vue-feather>
        Hot Reads
      </h3>


      <!-- Carousel -->
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row">
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row">
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row">
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <img src="https://mdbcdn.b-cdn.net/img/new/standard/nature/183.webp" class="card-img-top"
                    alt="Sunset Over the Sea" />
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Left and right controls -->
        <a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#myCarousel" data-slide="next"
          style=" border-radius: 50%; height: 50px; width: 50px; margin-top: 10em; background-color: #f1f1f1;  color: black;">
          <!-- <span class="carousel-control-next-icon"></span> -->
          <vue-feather type="arrow-right"></vue-feather>
        </a>
      </div>
    </div>
  </main>
  <div class="py-5 bg-light">
    <!-- Carousel wrapper -->
    <div class="container px-4 py-5">
      <div class="input-group">
        <select class="form-select form-select-lg" aria-label=".form-select-lg example">
          <option selected>All Categories</option>
          <option v-for="item in categories" :key="item.id" value="1">{{ item.Description }}</option>
        </select>
        <input type="text" class="form-control" v-model="form.search" placeholder="Find the book you like."
          aria-label="Text input with 2 dropdown buttons">
        <button class="btn btn-outline-secondary" type="button">Search
        </button>

      </div>
    </div>
  </div>
<!-- 
  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
          aria-expanded="false">Dropdown</button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#">Action before</a></li>
          <li><a class="dropdown-item" href="#">Another action before</a></li>
          <li><a class="dropdown-item" href="#">Something else here</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="#">Separated link</a></li>
        </ul> -->

  <div class="album py-5">
    <!-- Carousel wrapper -->
    <div class="container">
      <h3 class="mt-4 fw-bold px-2"><vue-feather type="book-open" size="21"></vue-feather>Book Shelf</h3>

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        <div v-for="contact in books.data" :key="contact.id" class="col-lg-2 col-md-3 col-sm-2 rounded-5">
          <div class="card shadow-sm" @click="selectItem(contact.id)">
            <svg class="bd-placeholder-img card-img-top" style="background-color: #F8F8F8;" width="100%" height="250"
              fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Book-Cover"
              preserveAspectRatio="xMidYMid slice" focusable="false">
              <title>Placeholder</title>
              <rect width="100%" height="100%" fill="#55595c" />
              <text x="50%" y="50%" fill="#eceeef" dy=".3em">Book Cover</text>
            </svg>
          </div>
          <p> <strong>{{ contact.Title }}...</strong> <br> {{ contact.Author }}<br>
            <vue-feather type="star" stroke="red" size="14" fill="red"></vue-feather>
            <strong>  5.0</strong></p>
        </div>
      </div>
    </div>
    
    <div>
    <ul>
      <li v-for="(item, index) in items" :key="index" @click="selectItem(index)">
        {{ item }}
      </li>
    </ul>
    <div v-if="selectedItem !== null">
      <button @click="showPopup = true">Show Popup</button>
      <div v-if="showPopup">
        <div class="popup-overlay"></div>
        <div class="popup">
          <div class="card">
            <svg class="bd-placeholder-img card-img-top" style="background-color: #F8F8F8;" width="100%" height="250"
              fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Book-Cover"
              preserveAspectRatio="xMidYMid slice" focusable="false">
              <title>Placeholder</title>
              <rect width="100%" height="100%" fill="#55595c" />
              <text x="50%" y="50%" fill="#eceeef" dy=".3em">Book Cover</text>
            </svg>
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      Some quick example text to build on the card title and make up the bulk
                      of the card's content.
                    </p>
                    <a href="#!" class="btn btn-primary">Button</a>
                  </div>
          </div>
          <h2>Selected Item: {{ items[selectedItem] }}</h2>
          <button @click="showPopup = false">Close Popup</button>
        </div>
      </div>
    </div>
  </div>
  </div>
</template>


<script>
import Nav from '../Shared/NavBar.vue';
import { Head, Link } from '@inertiajs/vue3'
import pickBy from 'lodash/pickBy'
import throttle from 'lodash/throttle'
import mapValues from 'lodash/mapValues'
import SearchFilter from '../Shared/SearchFilter'
import Pagination from '../Shared/Pagination'

export default {
  components: {
    Head,
    Link,
    Nav,
    Pagination,
    SearchFilter,
  },
  props: {
    filters: Object,
    books: Object,
    categories: Object,
    total_student: Number,
    type: String,
  },
  data() {
    return {
      form: {
        search: this.filters.search,
        trashed: this.filters.trashed,
      },
      items: ['Item 1', 'Item 2', 'Item 3', 'Item 4'],
      selectedItem: null,
      showPopup: false,
   }
  },
  watch: {
    form: {
      deep: true,
      handler: throttle(function () {
        this.$inertia.post(window.location.href, pickBy(this.form), { preserveState: true })
      }, 150),
    },
  },
  methods: {
    reset() {
      this.form = mapValues(this.form, () => null)
    },
    selectItem(index) {
      this.selectedItem = index;
      showPopup: true;
    },
  },
}
</script>


<style>
.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

.popup {
  position: fixed;
  top: 50%;
  width: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: white;
  padding: 20px;
}
</style>